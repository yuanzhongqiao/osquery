<div class="Box-sc-g0xbh4-0 QkQOb js-snippet-clipboard-copy-unpositioned" data-hpc="true"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 tabindex="-1" class="heading-element" dir="auto" _msttexthash="103168" _msthash="350">osquery</h1><a id="user-content-osquery" class="anchor" aria-label="永久链接： osquery" href="#osquery" _mstaria-label="352833" _msthash="351"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p align="center" dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://github.com/osquery/osquery/raw/master/docs/img/logo-2x-dark.png"><img alt="OSQyQuery 徽标" width="200" src="https://github.com/osquery/osquery/raw/master/docs/img/logo-2x-dark.png" style="max-width: 100%;" _mstalt="190424" _msthash="352"></a>
</p>
<p align="center" dir="auto" _msttexthash="253903702" _msthash="353">osquery 是一个 SQL 支持的操作系统检测、监控和分析框架。<br _istranslated="1">适用于 Linux、macOS 和 Windows。</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="15709447" _msthash="354">信息和资源</h2><a id="user-content-information-and-resources" class="anchor" aria-label="永久链接： 信息和资源" href="#information-and-resources" _mstaria-label="1044914" _msthash="355"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li _msttexthash="13718484" _msthash="356">主页： <a href="https://osquery.io" rel="nofollow" _istranslated="1">osquery.io</a></li>
<li _msttexthash="22139312" _msthash="357">下载次数： <a href="https://osquery.io/downloads" rel="nofollow" _istranslated="1">osquery.io/downloads</a></li>
<li _msttexthash="12994241" _msthash="358">文档： <a href="https://osquery.readthedocs.org" rel="nofollow" _istranslated="1">ReadTheDocs</a></li>
<li _msttexthash="52429884" _msthash="359">Stack Overflow：<a href="https://stackoverflow.com/questions/tagged/osquery" rel="nofollow" _istranslated="1">Stack Overflow 问题</a></li>
<li _msttexthash="15656134" _msthash="360">表 Schema：<a href="https://osquery.io/schema" rel="nofollow" _istranslated="1">osquery.io/schema</a></li>
<li _msttexthash="17509258" _msthash="361">查询包：<a href="https://github.com/osquery/osquery/tree/master/packs" _istranslated="1">osquery.io/packs</a></li>
<li _msttexthash="63055018" _msthash="362">Slack：<a href="https://chat.osquery.io/c/general" rel="nofollow" _istranslated="1">浏览存档</a>或<a href="https://join.slack.com/t/osquery/shared_invite/zt-1wi6cdgf7-zR2wt7FZ0ClHj6tEym6KFQ" rel="nofollow" _istranslated="1">加入对话</a></li>
<li><font _mstmutation="1" _msttexthash="20909746" _msthash="366">构建状态：</font><a href="https://github.com/osquery/osquery/actions/workflows/hosted_runners.yml"><img src="https://github.com/osquery/osquery/actions/workflows/hosted_runners.yml/badge.svg?branch=master" alt="GitHub Actions Build x86 状态" style="max-width: 100%;" _mstalt="700505" _msthash="363"></a> <a href="https://github.com/osquery/osquery/actions/workflows/self_hosted_runners.yml"><img src="https://github.com/osquery/osquery/actions/workflows/self_hosted_runners.yml/badge.svg?branch=master" alt="GitHub Actions Build AArch64 状态" style="max-width: 100%;" _mstalt="857480" _msthash="364"></a> <a href="https://osquery.readthedocs.io/en/latest/?badge=latest" rel="nofollow"><img src="https://camo.githubusercontent.com/da6a96b456e252ede4a1b18626704035e893ca9aee46dd767467e81a9cb04cb9/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f6f7371756572792f62616467652f3f76657273696f6e3d6c6174657374" alt="文档状态" data-canonical-src="https://readthedocs.org/projects/osquery/badge/?version=latest" style="max-width: 100%;" _mstalt="424515" _msthash="365"></a></li>
<li><font _mstmutation="1" _msttexthash="28044692" _msthash="368">CII 最佳实践：</font><a href="https://bestpractices.coreinfrastructure.org/projects/3125" rel="nofollow"><img src="https://camo.githubusercontent.com/2cfdb2256fec15969b897eec5ce4ce662c760d89c0fe678cc4acc02da8cf2059/68747470733a2f2f626573747072616374696365732e636f7265696e6672617374727563747572652e6f72672f70726f6a656374732f333132352f6261646765" alt="CII 最佳实践" data-canonical-src="https://bestpractices.coreinfrastructure.org/projects/3125/badge" style="max-width: 100%;" _mstalt="300924" _msthash="367"></a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="21547110" _msthash="369">什么是 osquery？</h2><a id="user-content-what-is-osquery" class="anchor" aria-label="永久链接：什么是 osquery？" href="#what-is-osquery" _mstaria-label="598416" _msthash="370"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="2100840417" _msthash="371">osQuery 将操作系统公开为高性能关系数据库。这允许您
编写基于 SQL 的查询以浏览操作系统数据。使用 osquery，SQL 表表示
抽象概念，例如正在运行的进程、加载的内核模块、开放的网络连接、
浏览器插件、硬件事件或文件哈希。</p>
<p dir="auto" _msttexthash="1161967950" _msthash="372">SQL 表通过简单的插件和扩展 API 实现。已经存在各种表
还有更多正在编写中：<a href="https://osquery.io/schema/" rel="nofollow" _istranslated="1">https://osquery.io/schema</a>。做到最好
了解 osQuery 为您提供的表达能力，请考虑以下 SQL
查询：</p>
<p dir="auto" _msttexthash="20211321" _msthash="373">列出<a href="https://osquery.io/schema/current#users" rel="nofollow" _istranslated="1"><code _istranslated="1">用户</code></a>：</p>
<div class="highlight highlight-source-sql notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> users;</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="SELECT * FROM users;" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="95131140" _msthash="374">检查具有已删除可执行文件的<a href="https://osquery.io/schema/current#processes" rel="nofollow" _istranslated="1"><code _istranslated="1">进程</code></a>：</p>
<div class="highlight highlight-source-sql notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> processes <span class="pl-k">WHERE</span> on_disk <span class="pl-k">=</span> <span class="pl-c1">0</span>;</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="SELECT * FROM processes WHERE on_disk = 0;" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="148479526" _msthash="375">获取侦听所有接口上的进程的进程名称、端口和 PID：</p>
<div class="highlight highlight-source-sql notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">SELECT DISTINCT</span> <span class="pl-c1">processes</span>.<span class="pl-c1">name</span>, <span class="pl-c1">listening_ports</span>.<span class="pl-c1">port</span>, <span class="pl-c1">processes</span>.<span class="pl-c1">pid</span>
  <span class="pl-k">FROM</span> listening_ports <span class="pl-k">JOIN</span> processes USING (pid)
  <span class="pl-k">WHERE</span> <span class="pl-c1">listening_ports</span>.<span class="pl-c1">address</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>0.0.0.0<span class="pl-pds">'</span></span>;</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="SELECT DISTINCT processes.name, listening_ports.port, processes.pid
  FROM listening_ports JOIN processes USING (pid)
  WHERE listening_ports.address = '0.0.0.0';" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="131384448" _msthash="376">找到每个启动可执行文件并保持其运行的 macOS LaunchDaemon：</p>
<div class="highlight highlight-source-sql notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">SELECT</span> name, program <span class="pl-k">||</span> program_arguments <span class="pl-k">AS</span> executable
  <span class="pl-k">FROM</span> launchd
  <span class="pl-k">WHERE</span> (run_at_load <span class="pl-k">=</span> <span class="pl-c1">1</span> <span class="pl-k">AND</span> keep_alive <span class="pl-k">=</span> <span class="pl-c1">1</span>)
  <span class="pl-k">AND</span> (program <span class="pl-k">!=</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span> <span class="pl-k">OR</span> program_arguments <span class="pl-k">!=</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>);</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="SELECT name, program || program_arguments AS executable
  FROM launchd
  WHERE (run_at_load = 1 AND keep_alive = 1)
  AND (program != '' OR program_arguments != '');" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="57828407" _msthash="377">从主机的角度检查 ARP 异常：</p>
<div class="highlight highlight-source-sql notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">SELECT</span> address, mac, <span class="pl-c1">COUNT</span>(mac) <span class="pl-k">AS</span> mac_count
  <span class="pl-k">FROM</span> arp_cache <span class="pl-k">GROUP BY</span> mac
  <span class="pl-k">HAVING</span> <span class="pl-c1">count</span>(mac) <span class="pl-k">&gt;</span> <span class="pl-c1">1</span>;</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="SELECT address, mac, COUNT(mac) AS mac_count
  FROM arp_cache GROUP BY mac
  HAVING count(mac) > 1;" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="155770823" _msthash="378">或者，您也可以使用 SQL 子查询来完成相同的结果：</p>
<div class="highlight highlight-source-sql notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">SELECT</span> address, mac, mac_count
  <span class="pl-k">FROM</span>
    (<span class="pl-k">SELECT</span> address, mac, <span class="pl-c1">COUNT</span>(mac) <span class="pl-k">AS</span> mac_count <span class="pl-k">FROM</span> arp_cache <span class="pl-k">GROUP BY</span> mac)
  <span class="pl-k">WHERE</span> mac_count <span class="pl-k">&gt;</span> <span class="pl-c1">1</span>;</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="SELECT address, mac, mac_count
  FROM
    (SELECT address, mac, COUNT(mac) AS mac_count FROM arp_cache GROUP BY mac)
  WHERE mac_count > 1;" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="35740952" _msthash="379">这些查询可以是：</p>
<ul dir="auto">
<li _msttexthash="124812740" _msthash="380">临时执行，以使用 <a href="https://osquery.readthedocs.org/en/latest/introduction/using-osqueryi/" rel="nofollow" _istranslated="1">osqueryi</a> shell 探索操作系统状态</li>
<li _msttexthash="163811596" _msthash="381">通过<a href="https://osquery.readthedocs.org/en/latest/introduction/using-osqueryd/" rel="nofollow" _istranslated="1">调度程序</a>执行，以监控一组主机中的操作系统状态</li>
<li _msttexthash="100718982" _msthash="382">使用 osquery Thrift API 从自定义应用程序启动</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="16520764" _msthash="383">下载并安装</h2><a id="user-content-download--install" class="anchor" aria-label="永久链接：下载并安装" href="#download--install" _mstaria-label="826501" _msthash="384"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="150079709" _msthash="385">下载最新的稳定版本和存储库信息
和安装说明访问 <a href="https://osquery.io/downloads/" rel="nofollow" _istranslated="1">https://osquery.io/downloads</a>。</p>
<p dir="auto"><font _mstmutation="1" _msttexthash="3777183683" _msthash="386">我们使用简单的编号版本控制方案，其中 X 是主要版本，Y 是次要版本，Z 是补丁。
我们大约每两个月计划一次次要版本。这些版本在我们的<a href="https://github.com/osquery/osquery/milestones" _mstmutation="1" _istranslated="1">里程碑</a>页面上进行跟踪。当我们的次要版本出现不可预见的错误并且我们需要快速修补时，会使用补丁版本。
如果我们需要更改构建配置，可能会使用罕见的“修订”版本。</font><code>X.Y.Z</code></p>
<p dir="auto" _msttexthash="8822238841" _msthash="387">主要版本、次要版本和补丁版本在 GitHub 上进行了标记，可以在 <a href="https://github.com/osquery/osquery/releases" _istranslated="1">Releases （版本</a>） 页面上查看。
当我们准备次要版本时，我们会打开一个新的 <a href="https://github.com/osquery/osquery/blob/master/.github/ISSUE_TEMPLATE/New_Release.md" _istranslated="1">Release Checklist</a> 问题。如果您对某个版本的状态感兴趣，请找到相应的 checklist issue，并注意当我们完成 checklist 后，该 issue 将被标记为 closed。
在我们的网站上托管新下载并将其添加到我们的托管存储库期间，我们会将版本视为“测试中”。
进行足够多的测试后，我们会在 GitHub 上将版本标记为“稳定”版本，这通常需要两周时间。</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="11040770" _msthash="388">从源构建</h2><a id="user-content-build-from-source" class="anchor" aria-label="永久链接：从源码构建" href="#build-from-source" _mstaria-label="646009" _msthash="389"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="350751284" _msthash="390">鼓励从源构建 osquery！查看我们的<a href="https://osquery.readthedocs.io/en/latest/development/building/" rel="nofollow" _istranslated="1">构建
指南</a>。也
查看我们的<a href="/osquery/osquery/blob/master/CONTRIBUTING.md" _istranslated="1">贡献指南</a>并加入
Slack <a href="https://join.slack.com/t/osquery/shared_invite/zt-1wi6cdgf7-zR2wt7FZ0ClHj6tEym6KFQ" rel="nofollow" _istranslated="1">上的社区</a>。</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="29515837" _msthash="391">Osquery 队列管理器</h2><a id="user-content-osquery-fleet-managers" class="anchor" aria-label="永久链接： Osquery 队列管理器" href="#osquery-fleet-managers" _mstaria-label="882622" _msthash="392"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="345427160" _msthash="393">有许多 osquery 队列管理器。osquery 项目不认可、推荐或测试这些。它们作为起点提供</p>
<markdown-accessiblity-table data-catalyst=""><table>
<thead>
<tr>
<th _msttexthash="6718387" _msthash="394">项目</th>
<th _msttexthash="9675445" _msthash="395">许可证</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/fleetdm/fleet" _msttexthash="7029672" _msthash="396">舰队</a></td>
<td _msttexthash="11217102" _msthash="397">开放核心</td>
</tr>
<tr>
<td><a href="https://www.kolide.com" rel="nofollow" _msttexthash="7892118" _msthash="398">科利德</a></td>
<td _msttexthash="4065906" _msthash="399">商业</td>
</tr>
<tr>
<td><a href="https://github.com/jmpsec/osctrl" _msttexthash="12497979" _msthash="400">操作系统ctrl</a></td>
<td _msttexthash="5156736" _msthash="401">开源</td>
</tr>
<tr>
<td><a href="https://github.com/zentralopensource/zentral" _msttexthash="11871327" _msthash="402">中心酒店</a></td>
<td _msttexthash="5156736" _msthash="403">开源</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="9675445" _msthash="404">许可证</h2><a id="user-content-license" class="anchor" aria-label="永久链接：许可证" href="#license" _mstaria-label="331903" _msthash="405"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="322931804" _msthash="406">通过向 osquery 做出贡献，您同意您的贡献将是
按照 LICENSE 文件上的定义进行许可。</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="5492357" _msthash="407">漏洞</h2><a id="user-content-vulnerabilities" class="anchor" aria-label="永久链接： 漏洞" href="#vulnerabilities" _mstaria-label="643149" _msthash="408"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="272460409" _msthash="409">我们会在标记版本发布中跟踪安全公告
GitHub 上的注释。我们也将这些汇总到 <a href="/osquery/osquery/blob/master/SECURITY.md" _istranslated="1">SECURITY.md</a> 中。</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="18324709" _msthash="410">了解更多信息</h2><a id="user-content-learn-more" class="anchor" aria-label="永久链接：了解更多信息" href="#learn-more" _mstaria-label="403520" _msthash="411"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="323833731" _msthash="412">osquery 文档可<a href="https://osquery.readthedocs.org" rel="nofollow" _istranslated="1">在线</a>获取。较早版本的文档
releases 可以通过版本号找到，<a href="https://readthedocs.org/projects/osquery/" rel="nofollow" _istranslated="1">因为
嗯</a>。</p>
<p dir="auto" _msttexthash="545836421" _msthash="413">如果您有兴趣了解有关 osquery 的更多信息，请阅读<a href="https://code.facebook.com/posts/844436395567983/introducing-osquery/" rel="nofollow" _istranslated="1">发布
博客
帖子</a>有关项目的背景信息，请访问<a href="https://osquery.readthedocs.org/" rel="nofollow" _istranslated="1">用户
指南</a>。</p>
<p dir="auto" _msttexthash="239821829" _msthash="414">开发和使用讨论正在 osquery Slack 中进行，<a href="https://join.slack.com/t/osquery/shared_invite/zt-1wi6cdgf7-zR2wt7FZ0ClHj6tEym6KFQ" rel="nofollow" _istranslated="1">请在此处</a>获取邀请！</p>
</article></div>
